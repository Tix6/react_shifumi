import chai from 'chai'; // eslint-disable-line
import reducer from '../game';
import initialState from '../../store/initial_state';
import { roundIsEnded } from '../../actions/game';

const { describe, it } = global;
const { expect } = chai;

describe('game reducer', () => {
  const state = Object.freeze(initialState.game);

  it('should return the initial state', () => {
    expect(reducer()).to.deep.equal(state);
  });

  it('should update round, scores and history', () => {
    const human = { shape: 'rock', hasWon: 'yes' };
    const computer = { shape: 'scissors', hasWon: 'no' };
    const action = roundIsEnded(human, computer);
    const expected = { roundCount: 2,
      scores: { human: 1, computer: 0, draw: 0 },
      history: [{ round: 1, computer, human }] };
    expect(reducer(state, action)).to.deep.equal(expected);
  });
});
